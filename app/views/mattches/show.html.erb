<p id="notice"><%= notice %></p>

   <% if @mattch.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(mattch.errors.count, "error") %> prohibited this mattch from being saved:</h2>

      <ul>
      <% mattch.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


<p>
  <strong>Match date:</strong>
  <%= @mattch.mattch_date %>
</p>


<table class="table table-bordered">
<tr>

<% @team_a = 0 %>
<% @team_b = 0 %>
<% @counter_c = 0 %>

<% @mattch.teams.each do |team|%>
	<td colspan="2">
  	<h2> <%= team.name %> </h2>
  </td>	
  <% @counter_c += 1 %>	
  <% if @counter_c == 1 %>
  	<td> <%= @counter_c %> </td>
  	<% @team_a = team.id %>
  <% else %>
  	<% @team_b = team.id %>
  <% end %>
<% end %>

</tr>

<%= form_for(@mattch) do |f| %>

  <tr>
  
  <% @counter_a = 0 %>
  <% @counter_b = 0 %>

  <%= f.fields_for :games do |g| %>

      <td>
    <%= g.label :game_number %>   <%= @counter_a += 1 %>
      </td>
      <td>        
    <%= g.label :forfeit %>
    <%= g.check_box(:forfeit) %>    
      </td>

    <%= g.hidden_field :game_number, value: @counter_a %>    

				<td> 
    <%= g.radio_button :winning_team_id, @team_a %>
		<%= g.radio_button :winning_team_id, 0 %>
		<%= g.radio_button :winning_team_id, @team_b %>
        </td>     
        <td>        
        </td>
        </tr>
      <tr>

    <% @counter_b = 0 %>
    <%= g.fields_for :gameplayers do |p| %>
        <td>
    <% if @counter_b < 2 %>    
  <%= p.collection_select(:player_id, Player.team_scope(@team_a).order("l_name"), :id, :full_name) %>
    <% else %>
  <%= p.collection_select(:player_id, Player.team_scope(@team_b).order("l_name"), :id, :full_name) %>
    <% end %>
      8<%= p.check_box(:eight) %>

      <% @counter_b += 1 %>
      <% if @counter_b == 2 %>
      	<td> 0  to  1</td>
      <% end %>
        </td> 

    <% end %>
      </tr>   
  <% end %>

  </table>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>



<%= link_to 'Edit', edit_mattch_path(@mattch) %> |
<%= link_to 'Back', mattches_path %>
